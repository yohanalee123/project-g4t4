<html>
  <head>
    <title>Login With Facebook!</title>

    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '{your-app-id}',
          cookie     : true,
          xfbml      : true,
          version    : '{api-version}'
        });
      };
    
      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "https://connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));

      function checkLoginState() {
        FB.getLoginStatus(function(response) {
          statusChangeCallback(response);
        });
      }

      function statusChangeCallback(response){
          FB.api('/me?fields=first_name, last_name, email', 
          function(response) {
            document.getElementById('name').innerHTML =
              response.first_name + ' ' + response.last_name;
            document.getElementById('email').innerHTML=
            'Thanks for logging in, ' + response.email;
            document.getElementById('loginBtn').style.display = "none";
            document.getElementById('name').style.display = "block";
            document.getElementById('email').style.display = "block";
            document.getElementById('logoutBtn').style.display = "block";
        });
      }

      function logout(response) {
        FB.logout(function(response) {
          document.getElementById('loginBtn').style.display = "block";
          document.getElementById('name').style.display = "none";
          document.getElementById('email').style.display = "none";
          document.getElementById('logoutBtn').style.display = "none";   
        });
      }
    </script>

  </head>
  <body>
    <h2>Login with Facebook</h2>
    <div id="loginBtn">
      <fb:login-button scope="public_profile,email" onlogin="checkLoginState();"> </fb:login-button>
    </div>

    <div id="name"></div>
    <div id="email"></div>
    <br>
    <div id="logoutBtn" onclick="logout" style="display:none;">LOGOUT</div>
  </body>
</html>

<!--
  ##FB.getLoginStatus - code that's run during page load to check a person's login status##
  FB.getLoginStatus(function(response) {
  statusChangeCallback(response);
});

  ##response object that's provided to your callback contains a number of fields##
{
    status: 'connected',
    authResponse: {
        accessToken: '...',
        expiresIn:'...',
        signedRequest:'...',
        userID:'...'
    }
}

  ##The onlogin attribute on the button to set up a JavaScript callback that checks the login status to see if the person logged in successfully##
<fb:login-button 
  scope="public_profile,email"
  onlogin="checkLoginState();">
</fb:login-button>

  ##This is the callback. It calls FB.getLoginStatus() to get the most recent login state. (statusChangeCallback() is a function that's part of the example that processes the response.##
function checkLoginState() {
  FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
  });
}
-->
